process DigitizeAndAnalyze = {
    source = PoolSource {
	untracked vstring fileNames = {"rfio:/castor/cern.ch/user/b/bellan/Software/Samples/CMSSW_1_5_0_pre1/2007_05_03/single_mu_pt_5_200_positive.root"}
	untracked uint32 debugVebosity = 10
	untracked bool   debugFlag     = true
    }
  untracked PSet maxEvents = {untracked int32 input = -1}
  
    module mix = MixingModule {         
	secsource input = PoolRASource {
	    untracked vstring fileNames = {"rfio:/castor/cern.ch/user/b/bellan/Software/Samples/CMSSW_1_5_0_pre1/2007_05_03/single_mu_pt_5_200_positive.root"}
	    #vstring fileNames = {'/afs/cern.ch/user/u/uberthon/public/CMSSW_0_4_0_pre4/src/SimGeneral/MixingModule/test/data/simevent.root'}
	    # bool random = true
	    # bool no_reuse = true
	    
	    string type = "none"
	    double averageNumber = 0
	    int32 minBunch = 0
	    int32 maxBunch = 10
	    int32 seed = 1234567
	}
	int32 bunchspace =25
    }
    
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"

    service = RandomNumberGeneratorService
    {
	untracked uint32 sourceSeed = 98765
	PSet moduleSeeds =
	{
	    untracked uint32 muonDTDigis = 563
	    untracked uint32 mix = 9823
	}
    }
    
    include "SimMuon/DTDigitizer/data/muonDTDigis.cfi"
    #replace muonDTDigis.debug = true

    module out = PoolOutputModule {
	untracked string fileName ="digi.root"
    }
    
    module muondtdigianalyzer = DTDigiAnalyzer{
	untracked string label = "muonDTDigis"
    }	 
    
    path p = {mix,muonDTDigis,muondtdigianalyzer}
    endpath this_is_the_end = {out}
}

